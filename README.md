# Blog Platform API

This is a RESTful API for a simple blog platform, developed as part of a lab assignment. It includes functionalities for managing users, articles, and comments, with JWT-based authentication. The application is containerized using Docker and set up for CI/CD with GitHub Actions.

## Features

- **User Management**: Register, login, get current user, update user.
- **Article Management**: CRUD operations for articles (Create, Read, Update, Delete).
- **Comment Management**: Add, get, and delete comments on articles.
- **Authentication**: JWT-based authentication for protected routes.

## Technology Stack

- **Backend**: FastAPI
- **ORM**: SQLAlchemy
- **Database**: PostgreSQL
- **Migrations**: Alembic
- **Authentication**: python-jose, passlib
- **Containerization**: Docker, docker-compose

## Getting Started

### Prerequisites

- Docker and docker-compose
- Git
- An account on GitHub

### Installation & Running

1. **Clone the repository:**
   ```bash
   git clone <your-repository-url>
   cd <repository-name>
   ```

2. **Create a `.env` file:**
   Create a `.env` file in the project root and add the necessary environment variables. You can use the following template:
   ```env
   # Database variables
   POSTGRES_USER=user
   POSTGRES_PASS=password
   POSTGRES_HOST=db
   POSTGRES_PORT=5432
   POSTGRES_DATABASE=blog

   # JWT variables
   JWT_SECRET="your-secret-key"
   ALGORITHM="HS256"
   ACCESS_TOKEN_EXPIRE_MINUTES=30
   ```

3. **Build and run with docker-compose:**
   ```bash
   docker-compose up --build
   ```
   The application will be available at `http://localhost:8000`.

## API Documentation

The API documentation is automatically generated by FastAPI and is available at:

- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

### Main Endpoints

#### Users
- `POST /api/users`: Register a new user.
- `POST /api/users/login`: Login to get an access token.
- `GET /api/user`: Get the current authenticated user's details.
- `PUT /api/user`: Update the current authenticated user's details.

#### Articles
- `POST /api/articles`: Create a new article.
- `GET /api/articles`: Get a list of all articles.
- `GET /api/articles/{slug}`: Get a specific article by its slug.
- `PUT /api/articles/{slug}`: Update an article by its slug.
- `DELETE /api/articles/{slug}`: Delete an article by its slug.

#### Comments
- `POST /api/articles/{slug}/comments`: Add a comment to an article.
- `GET /api/articles/{slug}/comments`: Get all comments for an article.
- `DELETE /api/articles/{slug}/comments/{id}`: Delete a comment by its ID.

## Deployment

This project is configured for automatic deployment. Pushing to the `main` branch will trigger a GitHub Action to:
1. Build the Docker image.
2. Publish the image to GitHub Container Registry.

From there, it can be deployed to a hosting service like Render.

- **Deployed Application**: [INSERT YOUR DEPLOYED APPLICATION URL HERE]
- **Swagger UI on Deployed App**: [INSERT YOUR DEPLOYED SWAGGER UI URL HERE]
